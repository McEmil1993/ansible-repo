# ---
# - name: Install Node.js 20.x
#   apt_repository:
#     repo: deb https://deb.nodesource.com/node_20.x jammy main
#     state: present
#     update_cache: yes

# - name: Install Node.js and npm
#   apt:
#     name: ['nodejs', 'npm']
#     state: present

---
- name: Update APT cache
  apt:
    update_cache: yes

- name: Fix broken packages (if needed)
  shell: sudo apt --fix-broken install

- name: Install Node.js 20.x repository
  apt_repository:
    repo: deb https://deb.nodesource.com/node_20.x jammy main
    state: present
    update_cache: yes

- name: Install Node.js and npm
  apt:
    name: ['nodejs', 'npm']
    state: present